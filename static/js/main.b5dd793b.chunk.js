(this.webpackJsonpaoc2022score=this.webpackJsonpaoc2022score||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var r,a=n(1),o=n.n(a),i=n(8),l=n.n(i),c=(n(13),n(7)),s=n(2),u=n(3),d=(n(14),n(0));!function(t){t.BothStars="bothstars",t.Delta="delta",t.StarGain="stargain",t.FirstStar="firststar",t.Total="total"}(r||(r={}));var v=36e5,b=3600,j=new Array(25).fill(!1),p=new Date(2022,11,25),_=new Date,f=new Date(Math.min(+p,+_)).getDate();j=j.map((function(t,e){return!(e+1>f)}));function m(t){for(var e=O(""+f,r.BothStars,Object.entries(t.members)),n=0;n<f;n++)x(""+(n+1),e);return e=O(""+f,r.StarGain,e)}function h(t,e,n){var r,a;return null===(r=t.completion_day_level[n])||void 0===r||null===(a=r[""+e])||void 0===a?void 0:a.get_star_ts}function O(t,e,n){switch(e){case r.BothStars:return g(t,n);case r.Delta:return function(t,e){return Object(s.a)(e).sort((function(e,n){var r=h(e[1],2,t),a=h(n[1],2,t),o=h(e[1],1,t),i=h(n[1],1,t);return r&&a?r-o-(a-i):r&&!a?r-o-Number.MAX_SAFE_INTEGER:!r&&a?Number.MAX_SAFE_INTEGER-(a-i):0}))}(t,n);case r.StarGain:return function(t,e){return Object(s.a)(e).sort((function(e,n){var r,a,o,i,l,c,s,u,d=parseInt(null===(r=e[1].completion_day_level[t])||void 0===r||null===(a=r[1])||void 0===a?void 0:a.star_gain)+parseInt(null===(o=e[1].completion_day_level[t])||void 0===o||null===(i=o[2])||void 0===i?void 0:i.star_gain);return parseInt(null===(l=n[1].completion_day_level[t])||void 0===l||null===(c=l[1])||void 0===c?void 0:c.star_gain)+parseInt(null===(s=n[1].completion_day_level[t])||void 0===s||null===(u=s[2])||void 0===u?void 0:u.star_gain)-d}))}(t,n);case r.FirstStar:return S(t,n);case r.Total:return function(t,e){return Object(s.a)(e).sort((function(e,n){for(var r=0,a=0,o=1;o<=+t;o++)r+=y(o,e[1]),a+=y(o,n[1]);return a-r}))}(t,n)}}function g(t,e){return Object(s.a)(e).sort((function(e,n){var r=h(e[1],2,t),a=h(n[1],2,t),o=h(e[1],1,t),i=h(n[1],1,t);return r&&a?r-a:r&&!a?r-Number.MAX_SAFE_INTEGER:!r&&a?Number.MAX_SAFE_INTEGER-a:(null!==o&&void 0!==o?o:Number.MAX_SAFE_INTEGER)-(null!==i&&void 0!==i?i:Number.MAX_SAFE_INTEGER)}))}function S(t,e){return Object(s.a)(e).sort((function(e,n){var r=h(e[1],1,t),a=h(n[1],1,t);return r&&a?r-a:r&&!a?r-Number.MAX_SAFE_INTEGER:!r&&a?Number.MAX_SAFE_INTEGER-(a-a):0}))}function x(t,e){var n=S(t,e),r=g(t,e);n.forEach((function(e,n,r){var a,o=null===(a=e[1].completion_day_level[t])||void 0===a?void 0:a[1];o?o.star_gain=r.length-n:e[1].completion_day_level[t]={1:{star_gain:0}}})),r.forEach((function(e,n,r){var a,o=null===(a=e[1].completion_day_level[t])||void 0===a?void 0:a[2];o?o.star_gain=r.length-n:e[1].completion_day_level[t]=Object(c.a)(Object(c.a)({},e[1].completion_day_level[t]),{},{2:{star_gain:0}})}))}function N(t,e){if(void 0===t)return"";var n=new Date(2022,11,parseInt(e),6,0,0,0).getTime(),r=new Date(1e3*t).getTime()-n,a=Math.floor(r/v),o=Math.floor(r%v/6e4),i=Math.floor(r%6e4/1e3);return a+":"+o.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")}function E(t,e,n){var a,o,i,l,c,s;if(n===r.BothStars||n===r.FirstStar)return"".concat(N(null===(a=t.completion_day_level)||void 0===a||null===(o=a[e])||void 0===o||null===(i=o[1])||void 0===i?void 0:i.get_star_ts,e)," / ").concat(N(null===(l=t.completion_day_level)||void 0===l||null===(c=l[e])||void 0===c||null===(s=c[2])||void 0===s?void 0:s.get_star_ts,e));if(n===r.Delta)return function(t,e){var n,r,a,o,i,l,c=null===(n=t.completion_day_level)||void 0===n||null===(r=n[e])||void 0===r||null===(a=r[1])||void 0===a?void 0:a.get_star_ts,s=null===(o=t.completion_day_level)||void 0===o||null===(i=o[e])||void 0===i||null===(l=i[2])||void 0===l?void 0:l.get_star_ts;if(void 0===s)return"";var u=s-c,d=Math.floor(u/b),v=Math.floor(u%b/60),j=Math.floor(u%60);return d+":"+v.toString().padStart(2,"0")+":"+j.toString().padStart(2,"0")}(t,e);if(n===r.StarGain){var u,v,j,p,_,f,m=null===(u=t.completion_day_level)||void 0===u||null===(v=u[e])||void 0===v||null===(j=v[1])||void 0===j?void 0:j.star_gain,h=null===(p=t.completion_day_level)||void 0===p||null===(_=p[e])||void 0===_||null===(f=_[2])||void 0===f?void 0:f.star_gain;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{className:"privboard-star-firstonly",children:m})," / ",Object(d.jsx)("span",{className:"privboard-star-both",children:h})," -> ",Object(d.jsx)("span",{className:"privboard-star-both",children:(null!==m&&void 0!==m?m:0)+(null!==h&&void 0!==h?h:0)})]})}if(n===r.Total){for(var O=0,g=1;g<=+e;g++)O+=y(g,t);return O}}function y(t,e){var n,r,a,o,i,l;return(null===(n=e.completion_day_level)||void 0===n||null===(r=n[""+t])||void 0===r||null===(a=r[1])||void 0===a?void 0:a.star_gain)+(null===(o=e.completion_day_level)||void 0===o||null===(i=o[""+t])||void 0===i||null===(l=i[2])||void 0===l?void 0:l.star_gain)}function F(t){switch(t){case 0:return"privboard-star-both";case 1:return"privboard-star-firstonly";case 2:return"privboard-third";default:return""}}var T=function(){var t=Object(a.useState)([]),e=Object(u.a)(t,2),o=e[0],i=e[1];Object(a.useEffect)((function(){n.e(4).then(n.t.bind(null,17,3)).then((function(t){var e;null===(e=new URLSearchParams(window.location.search).get("ex"))||void 0===e||e.split(",").forEach((function(e){return t.members[e]?delete t.members[e]:0})),i(m(t))}))}),[]);var l=Object(a.useState)(""+f),c=Object(u.a)(l,2),s=c[0],v=c[1],b=Object(a.useState)(r.StarGain),p=Object(u.a)(b,2),_=p[0],h=p[1],g=Object(a.useState)(!1),S=Object(u.a)(g,2),x=S[0],N=S[1],y=Object(a.useState)(""),T=Object(u.a)(y,2),A=T[0],w=T[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App-header",children:Object(d.jsx)("div",{className:"privboard-row",children:Object(d.jsx)("span",{className:"privboard-days",children:j.map((function(t,e){return t?Object(d.jsx)("a",{href:"",className:""+(e+1)===s?"bold":"",onClick:function(t){t.preventDefault(),t.stopPropagation(),v(""+(e+1)),i(O(""+(e+1),_,o))},children:(e+1).toString().split("").map((function(t,e){return Object(d.jsxs)(d.Fragment,{children:[e>0?Object(d.jsx)("br",{}):Object(d.jsx)(d.Fragment,{}),t]})}))}):Object(d.jsx)("span",{children:(e+1).toString().split("").map((function(t,e){return Object(d.jsxs)(d.Fragment,{children:[e>0?Object(d.jsx)("br",{}):Object(d.jsx)(d.Fragment,{}),t]})}))})}))})})}),Object(d.jsxs)("section",{children:[Object(d.jsxs)("select",{value:_,onChange:function(t){var e=t.target.value;h(e),i(O(s,e,o))},children:[Object(d.jsx)("option",{value:r.BothStars,children:"Time to both stars"}),Object(d.jsx)("option",{value:r.FirstStar,children:"Time to first star"}),Object(d.jsx)("option",{value:r.Delta,children:"Time between star 1 and 2"}),Object(d.jsx)("option",{value:r.StarGain,children:"Points gained"}),Object(d.jsxs)("option",{value:r.Total,children:["Total at day ",s]})]}),o.map((function(t,e){return function(t,e,n,r){var a;return Object(d.jsxs)("div",{className:"privboard-row",title:t.id,children:[Object(d.jsxs)("span",{className:"privboard-position",children:[n+1,")"]})," ",E(t,e,r)," ",Object(d.jsx)("span",{className:"privboard-name ".concat(F(n)," ").concat(null===t.name?"leaderboard-anon":""),children:null!==(a=t.name)&&void 0!==a?a:"(anonymous user #".concat(t.id,")")})]})}(t[1],s,e,_)}))]}),Object(d.jsxs)("aside",{className:"score-input-aside ".concat(x?"expanded":""),children:[Object(d.jsx)("label",{htmlFor:"scoresinput",children:"Insert custom scoreboard JSON"}),Object(d.jsx)("button",{className:"link-like-button",onClick:function(){return N(!x)},children:x?"-":"+"}),x&&Object(d.jsx)("textarea",{id:"scoresinput",value:A,onChange:function(t){w(t.target.value)}}),x&&Object(d.jsx)("button",{onClick:function(){var t=m(JSON.parse(A));i(t)},children:"Set scoreboard"})]})]})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};l.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root")),A()}},[[16,1,2]]]);
//# sourceMappingURL=main.b5dd793b.chunk.js.map